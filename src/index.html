<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Library</title>
    <link href="/dist/output.css" rel="stylesheet">

</head>
<body class = "bg-gray-900">
    <div class="antialiased bg-gray-900">
        <!-- Nav Bar -->
        <nav class="px-4 py-2.5 bg-gray-800 border-gray-700 fixed left-0 right-0 top-0 z-50">
          <div class="flex flex-wrap justify-between items-center">
            <div class="flex justify-start items-center">
              <a href="https://malikali.ca" target="_blank" class="flex items-center justify-between mr-4">
                <img
                  src="https://flowbite.s3.amazonaws.com/logo.svg"
                  class="mr-3 h-8"
                  alt="Flowbite Logo"
                />
                <span class="self-center text-2xl font-semibold whitespace-nowrap text-white">Malik's Public Library</span>
              </a>
            </div>
          </div>
        </nav>

        <!-- Sidebar -->
        <aside
        class="fixed top-0 left-0 z-40 w-64 h-screen pt-14 transition-transform -translate-x-full  border-r  md:translate-x-0 bg-gray-800 border-gray-700"
        aria-label="Sidenav"
        id="drawer-navigation"
        >
            <div class="overflow-y-auto py-5 px-3 h-full bg-gray-800">
                <form id = "bookForm"  class="p-4 md:p-5">
                    <div class="grid gap-4 mb-4 grid-cols-2">
                        <div class="col-span-2">
                            <label for="title" class="block mb-2 text-sm font-medium text-white">Title</label>
                            <input id = "title" type="text" name="title" class=" border text-sm rounded-lg  block w-full p-2.5 bg-gray-600 border-gray-500 placeholder-gray-400 text-white focus:ring-primary-500 focus:border-primary-500" placeholder="Book title" required="">
                        </div>
                        <div class="col-span-2">
                            <label for="author" class="block mb-2 text-sm font-medium text-white">Author</label>
                            <input id = "author" type="text" name="author" class="border text-sm rounded-lg  block w-full p-2.5 bg-gray-600 border-gray-500 placeholder-gray-400 text-white focus:ring-primary-500 focus:border-primary-500" placeholder="Author Name" required="">
                        </div>
                        <div class="col-span-2 ">
                            <label for="pages" class="block mb-2 text-sm font-medium text-white">Number of Pages</label>
                            <input id = "pages" type="number" name="pages" class="border text-sm rounded-lg block w-full p-2.5 bg-gray-600 border-gray-500 placeholder-gray-400 text-white focus:ring-primary-500 focus:border-primary-500" placeholder="100" required="">
                        </div>
                        
                        <div class="col-span-2">
                            <label for="genre" class="block mb-2 text-sm font-medium text-white">Genre</label>
                            <select id="genre" class="border text-sm rounded-lg block w-full p-2.5 bg-gray-600 border-gray-500 placeholder-gray-400 text-white focus:ring-primary-500 focus:border-primary-500">
                                <option selected="">Select category</option>
                                <option value="CB">Comic Book</option>
                                <option value="MY">Mystery</option>
                                <option value="FA">Fantasy</option>
                                <option value="NF">Non-Fiction</option>
                                <option value="RM">Romance</option>
                            </select>
                        </div>
                        <div class="col-span-2">
                            <label for="desc" class="block mb-2 text-sm font-medium text-white">Book Description</label>
                            <textarea id="desc" rows="4" class="block p-2.5 w-full text-sm rounded-lg border bg-gray-600 border-gray-500 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500" placeholder="Write book description here"></textarea>                    
                        </div>
                        <div class = "col-span-2 flex items-center justify-between"> 
                            <label for = "read" class = "block text-sm font-medium text-white">Read Book?</label>
                            <input id = "read" type = "checkbox">
                        </div>
                    </div>
                    <button
                            class="flex items-center bg-green-500 p-2 text-base font-medium w-full rounded-lg  text-white hover:bg-green-700 group"
                            id = "buttonsubmit"
                            >
                            <svg 
                            class="w-6 h-6 text-white transition duration-75 group-hover:text-white" 
                            fill="currentColor" 
                            viewBox="0 0 20 20" 
                            xmlns="http://www.w3.org/2000/svg">
                                <path 
                                    fill-rule="evenodd" 
                                    d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" 
                                    clip-rule="evenodd">
                                </path>
                            </svg>
                            <span class="ml-3">Add Book</span>
                        </button>
                </form>
            </div>
        </aside>
    
        <main class="p-4 md:ml-64 h-auto pt-20">
            <div id = "display" class="grid text-white grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
            
            
                
            </div>
        </main>
    </div>

    <script>
        const myLibrary = [];

        function Book(title, author, pages, genre, desc, read){
            this.title = title;
            this.author = author;
            this.pages = pages;
            this.genre = genre;
            this.desc = desc;
            this.read = read;
        }

        function addBookToLibrary(book) {  
            myLibrary.push(book);
        }

        function removeBook(index) {
            myLibrary.splice(index,1);
            renderBook();
        }
        
        function renderBook() {
            let display = document.querySelector('#display');
            display.innerHTML = '';

            for(let i = 0; i < myLibrary.length; i++){
                let div = document.createElement('div');
                let hfour = document.createElement('h4');
                let hfive = document.createElement('h5');
                let hsix = document.createElement('h6');
                let p = document.createElement('p');
                let btnDiv = document.createElement('div');
                let deleteBtn = document.createElement('button');
                let updateBtn = document.createElement('button');


                div.classList.add("w-full", "max-w-sm", "p-4",  "rounded-lg", "shadow", "sm:p-8", "bg-gray-800", "border-gray-700");
                hfour.classList.add("mb-1", "text-2xl", "font-bold", "tracking-tight", "text-white");
                hfive.classList.add("mb-", "text-lg", "font-bold", "tracking-tight", "text-white");
                hsix.classList.add()
                p.classList.add("font-normal", "text-gray-400");
                btnDiv.classList.add("grid", "grid-cols-2", "gap-2", "mt-5", "text-center");
                deleteBtn.classList.add("flex", "items-center", "justify-center", "p-2", "text-base", "font-medium", "w-full", "rounded-lg", "text-white", "bg-red-500", "hover:bg-red-700", "group")
                updateBtn.classList.add("flex", "items-center", "justify-center", "p-2", "text-base", "font-medium", "w-full", "rounded-lg", "text-white", "bg-blue-500", "hover:bg-blue-700", "group")
                
                div.setAttribute('place', `${i}`)
                deleteBtn.setAttribute('id', 'deletebtn');
                updateBtn.setAttribute('id', 'updatebtn');

                display.appendChild(div);
                div.appendChild(hfour);
                div.appendChild(hfive);
                div.appendChild(p);
                div.appendChild(btnDiv);
                btnDiv.appendChild(updateBtn);
                btnDiv.appendChild(deleteBtn);

                hfour.textContent = myLibrary[i].title;
                hfive.textContent = `Written by ${myLibrary[i].author}. Contains ${myLibrary[i].pages} pages.`;
                p.textContent = myLibrary[i].desc;
                if(myLibrary[i].read == true){
                    updateBtn.textContent = "Read Book";
                }
                else{
                    updateBtn.textContent = "Not Read Book";
                }
                deleteBtn.textContent = "Delete Book";
                deleteBtn.addEventListener('click', () =>{
                    removeBook(i);
                })

            }
        }

        

        const bookFormButton = document.querySelector("#buttonsubmit");
        bookFormButton.addEventListener("click", (event) => {
            event.preventDefault();
            const title = document.querySelector("#title").value;
            const author = document.querySelector("#author").value;
            const pages = parseFloat(document.querySelector("#pages").value);
            const genre = document.querySelector("#genre").value;
            const desc = document.querySelector("#desc").value;
            const read = document.querySelector("#read").checked;

            let newBook = new Book(title, author, pages, genre, desc, read);
            addBookToLibrary(newBook);
            console.log(myLibrary);
            renderBook();
        })

        


    





    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>
</body>
</html>